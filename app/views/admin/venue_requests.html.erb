<% content_for :title, "All Venue Requests - Admin" %>

<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h2>All Venue Requests</h2>
    <%= link_to "← Dashboard", admin_dashboard_path, class: "btn btn-outline-secondary" %>
  </div>

  <!-- Filters -->
  <div class="card mb-4">
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
          <h6>Filter by Status:</h6>
          <div class="btn-group">
            <%= link_to "All", admin_venue_requests_path, 
                class: "btn #{params[:status].blank? ? 'btn-primary' : 'btn-outline-primary'}" %>
            <%= link_to "Pending", admin_venue_requests_path(status: 'pending'), 
                class: "btn #{params[:status] == 'pending' ? 'btn-warning' : 'btn-outline-warning'}" %>
            <%= link_to "Approved", admin_venue_requests_path(status: 'approved'), 
                class: "btn #{params[:status] == 'approved' ? 'btn-success' : 'btn-outline-success'}" %>
            <%= link_to "Rejected", admin_venue_requests_path(status: 'rejected'), 
                class: "btn #{params[:status] == 'rejected' ? 'btn-danger' : 'btn-outline-danger'}" %>
          </div>
        </div>
        <div class="col-md-6">
          <h6>Filter by Type:</h6>
          <div class="btn-group">
            <%= link_to "All Types", admin_venue_requests_path, 
                class: "btn #{params[:type].blank? ? 'btn-info' : 'btn-outline-info'}" %>
            <%= link_to "New Venues", admin_venue_requests_path(type: 'new_venue'), 
                class: "btn #{params[:type] == 'new_venue' ? 'btn-info' : 'btn-outline-info'}" %>
            <%= link_to "Ownership Claims", admin_venue_requests_path(type: 'existing_venue_claim'), 
                class: "btn #{params[:type] == 'existing_venue_claim' ? 'btn-info' : 'btn-outline-info'}" %>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Results Count -->
  <div class="mb-3">
    <p class="text-muted">
      Showing <%= @venue_requests.count %> request<%= 's' unless @venue_requests.count == 1 %>
      <% if params[:status].present? %>
        with status: <strong><%= params[:status].humanize %></strong>
      <% end %>
      <% if params[:type].present? %>
        of type: <strong><%= params[:type].humanize %></strong>
      <% end %>
    </p>
  </div>

  <!-- Use the same venue requests cards from the VenueRequestsController index -->
  <%= render 'venue_requests/requests_list', venue_requests: @venue_requests %>
</div>
