<% content_for :title, "Upcoming Events Near You" %>

<div class="container my-4" style="max-width: 500px;">
  <% @events.each do |event| %>
    <% venue = event.venue %>
    <div class="card shadow-sm mb-4">
      <div class="card-body text-center">

        <!-- Venue Name -->
        <h4 class="mb-3">
          <%= link_to venue.name, venue_path(venue), class: "text-decoration-none" %>
        </h4>

        <!-- Venue Address -->
        <% if venue.full_address.present? %>
          <p class="mb-2">
            <%= link_to venue.full_address, "https://www.google.com/maps/search/?api=1&query=#{CGI.escape(venue.full_address)}", target: "_blank", class: "text-decoration-none" %>
          </p>
        <% end %>

        <!-- Artist -->
        <% if event.artist.present? %>
          <p class="mb-2">
            <%= link_to event.artist.username, artist_path(event.artist), class: "btn btn-sm btn-outline-primary", data: { turbo_frame: "_top" } %>
          </p>
        <% else %>
          <p class="mb-2">
            <span class="badge bg-secondary"><%= event.artist_name %></span>
          </p>
        <% end %>

        <!-- Category -->
        <p class="text-muted">
          <strong>Category:</strong> <%= event.category %>
        </p>

        <!-- Date and Time -->
        <p class="mb-2">
          <strong>
            <%= event.date == Date.today ? "Today" : event.date.strftime("%B %-d, %Y") %>
            @ <%= event.start_time.strftime("%-I:%M %p") %>
            - <%= event.end_time.strftime("%-I:%M %p") %>
          </strong>
        </p>

        <!-- View Event Button -->
        <%= link_to "View Event", event_path(event), class: "btn btn-outline-dark btn-sm mt-2" %>
      </div>
    </div>
  <% end %>
</div>
