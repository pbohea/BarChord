<div class="container my-4" style="max-width: 500px;">
  <div class="card shadow-sm">
    <div class="card-body text-center">

      <!-- Venue Name Button at Top -->
      <div class="d-flex justify-content-center">
        <button type="button"
            class="btn btn-outline-primary mb-3"
            data-bs-toggle="modal"
            data-bs-target="#venueShowModal">
          <%= @event.venue.name %>
        </button>
      </div>

      <!-- Artist Image -->
      <% if @event.artist&.image&.attached? %>
        <%= link_to artist_path(@event.artist), data: { turbo_frame: "_top" } do %>
          <%= image_tag @event.artist.image.variant(resize_to_fill: [80, 80]),
                class: "rounded-circle mb-2 shadow",
                style: "object-fit: cover;" %>
        <% end %>
      <% else %>
        <div class="rounded-circle bg-secondary mb-2 d-flex align-items-center justify-content-center mx-auto" style="width: 80px; height: 80px; color: white;">
          <i class="fas fa-user fa-lg"></i>
        </div>
      <% end %>

      <!-- Artist Name -->
      <p class="mb-0">
        <%= link_to @event.artist.username, artist_path(@event.artist),
              class: "text-decoration-none text-primary fw-semibold",
              data: { turbo_frame: "_top" } %>
      </p>
    </div>

    <!-- Event Details List -->
    <ul class="list-group list-group-flush mb-0">
      <li class="list-group-item text-muted">
        <%= @event.category %>
      </li>

      <li class="list-group-item">
        <strong>Date:</strong> <%= @event.date.strftime("%A, %B %-d") %><br>
        <strong>Time:</strong>
        <%= @event.start_time.strftime("%-I:%M %p") %> â€“ <%= @event.end_time.strftime("%-I:%M %p") %>
      </li>

      <li class="list-group-item">
        <strong>Location:</strong> <%= @event.indoors? ? "Indoors" : "Outdoors" %>
      </li>

      <li class="list-group-item">
        <strong>Cover Charge:</strong>
        <%= @event.cover? ? number_to_currency(@event.cover_amount || 5) : "No Cover" %>
      </li>
    </ul>
  </div>

  <% if @event.venue.website.present? %>
    <div class="d-grid mt-3">
      <%= link_to "Go to event", @event.venue.website,
            class: "btn btn-primary",
            target: "_blank",
            rel: "noopener",
            data: { turbo: false } %>
    </div>
  <% end %>

  <!-- Modal -->
  <div class="modal fade" id="venueShowModal" tabindex="-1" aria-labelledby="venueShowLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <turbo-frame id="venue_show_frame" src="<%= venue_path(@event.venue) %>">
          <div class="text-center text-muted p-4">Loading venue...</div>
        </turbo-frame>
      </div>
    </div>
  </div>

</div>
