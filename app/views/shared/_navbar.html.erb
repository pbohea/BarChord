<nav class="navbar d-hotwire-native-none bg-body-tertiary">
  <div class="container-fluid">
    <a class="navbar-brand" href="/">BarChord</a>

    <!-- Offcanvas Toggler -->
    <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#accountMenu" aria-controls="accountMenu" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
  </div>
</nav>

<% signed_in = owner_signed_in? || artist_signed_in? || user_signed_in? %>

<div class="offcanvas offcanvas-end" tabindex="-1" id="accountMenu" data-turbo="false" aria-labelledby="accountMenuLabel" data-bs-backdrop="true" data-bs-scroll="false">
  <div class="d-flex flex-column justify-content-between" style="height: 100dvh; overflow: hidden;">

    <!-- Top Section -->
    <div class="container py-4">
      <% if signed_in %>
        <div class="d-grid gap-2">

          <% if owner_signed_in? %>
            <% if current_owner.email == "pbohea@gmail.com" %>
              <%= link_to "Admin Dashboard", admin_dashboard_path, class: "btn btn-outline-warning", data: { turbo: false } %>
            <% end %>
            <%= link_to "Dashboard", owner_dashboard_path(current_owner), class: "btn btn-outline-primary", data: { turbo: false } %>
            <%= link_to "Edit Profile", edit_owner_registration_path, class: "btn btn-outline-secondary", data: { turbo: false } %>
            <%= button_to "Sign Out", destroy_owner_session_path, method: :delete, data: { turbo: false }, class: "btn btn-outline-danger" %>

          <% elsif artist_signed_in? %>
            <% if current_artist.email == "pbohea@gmail.com" %>
              <%= link_to "Admin Dashboard", admin_dashboard_path, class: "btn btn-outline-warning", data: { turbo: false } %>
            <% end %>
            <%= link_to "Dashboard", artist_dashboard_path(current_artist), class: "btn btn-outline-primary", data: { turbo: false } %>
            <%= link_to "Edit Profile", edit_artist_registration_path, class: "btn btn-outline-secondary", data: { turbo: false } %>
            <%= button_to "Sign Out", destroy_artist_session_path, method: :delete, data: { turbo: false }, class: "btn btn-outline-danger" %>

          <% elsif user_signed_in? %>
            <% if current_user.email == "pbohea@gmail.com" %>
              <%= link_to "Admin Dashboard", admin_dashboard_path, class: "btn btn-outline-warning", data: { turbo: false } %>
            <% end %>
            <%= link_to "Dashboard", user_dashboard_path(current_user), class: "btn btn-outline-primary", data: { turbo: false } %>
            <%= link_to "Edit Profile", edit_user_registration_path, class: "btn btn-outline-secondary", data: { turbo: false } %>
            <%= button_to "Sign Out", destroy_user_session_path, method: :delete, data: { turbo: false }, class: "btn btn-outline-danger" %>
          <% end %>

        </div>
      <% else %>
        <div class="d-grid gap-2">
          <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#signinModal">Sign In</button>
          <button class="btn btn-outline-secondary" data-bs-toggle="modal" data-bs-target="#signupModal">Sign Up</button>
        </div>
      <% end %>
    </div>

    <!-- Bottom Section -->
    <div class="text-center py-3">
      <%= link_to "About BarChord", about_path, class: "text-primary text-decoration-none fw-semibold", data: { turbo: false } %>
    </div>
  </div>
</div>

<% unless hotwire_native_app? %>
  <!-- Only include Bootstrap modals for web version -->
  <!-- Sign In Modal -->
  <div class="modal fade" id="signinModal" data-turbo="false" tabindex="-1" aria-labelledby="signinModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="signinModalLabel">Sign In As</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body d-grid gap-2">
          <%= link_to "User", new_user_session_path, class: "btn btn-outline-primary w-100", data: { turbo: false } %>
          <%= link_to "Owner", new_owner_session_path, class: "btn btn-outline-success w-100", data: { turbo: false } %>
          <%= link_to "Artist", new_artist_session_path, class: "btn btn-outline-info w-100", data: { turbo: false } %>
        </div>
      </div>
    </div>
  </div>

  <!-- Sign Up Modal -->
  <div class="modal fade" id="signupModal" data-turbo="false" tabindex="-1" aria-labelledby="signupModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="signupModalLabel">Sign Up As</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body d-grid gap-2">
          <%= link_to "User", new_user_registration_path, class: "btn btn-outline-primary w-100", data: { turbo: false } %>
          <%= link_to "Owner", new_owner_registration_path, class: "btn btn-outline-success w-100", data: { turbo: false } %>
          <%= link_to "Artist", new_artist_registration_path, class: "btn btn-outline-info w-100", data: { turbo: false } %>
        </div>
      </div>
    </div>
  </div>
<% end %>
