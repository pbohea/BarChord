<% content_for :title, "Venue Information" %>

<div class="min-vh-100" style="background-color: #f8f9fa;">
  <div class="px-3 pt-4" style="max-width: 500px; margin: 0 auto;">

    <!-- Venue Profile Card -->
    <div class="card border-0 shadow-lg mb-4" style="border-radius: 24px; background-color: #ffffff;">
      <div class="card-body text-center">

        <% if @venue.image.present? %>
          <img src="<%= url_for(@venue.image) %>" alt="Venue Photo" 
               class="rounded-circle border border-white border-3 mb-3" 
               style="width: 120px; height: 120px; object-fit: cover; box-shadow: 0 20px 40px rgba(0,0,0,0.3);">
        <% else %>
<!--          <div class="rounded-circle bg-secondary mb-3 d-flex align-items-center justify-content-center"
               style="width: 120px; height: 120px; color: white;">
            <i class="fas fa-music fa-2x"></i>
          </div>-->
        <% end %>

        <% if @venue.website.present? %>
          <h4 class="fw-bold mb-2 mt-2 display-6"
      style="background: linear-gradient(90deg, #0d6efd, #4dabf7); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
            <%= link_to @venue.name, @venue.website,
                target: "_blank", rel: "noopener",
                class: "text-decoration-none" %>
          </h4>
        <% else %>
          <h4 class="fw-bold mb-2 mt-2 display-6"
      style="background: linear-gradient(90deg, #0d6efd, #4dabf7); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
            <%= @venue.name %>
          </h4>
        <% end %>

        <% if @venue.full_address.present? %>
          <p class="mb-2">
            <%= @venue.full_address %>
          </p>
        <% end %>

        <p class="text-muted mt-3">
          <%= @venue.category %>
        </p>

        <% unless owner_signed_in? %>
          <turbo-frame id="follow_button_<%= @venue.id %>">
            <%= render partial: "venues/follow_button", locals: { venue: @venue } %>
          </turbo-frame>
        <% end %>

      </div>
    </div>

    <!-- Upcoming Events -->
    <h5 class="text-center text-muted mb-3">Upcoming Events</h5>

    <% if @upcoming_events.any? %>
      <% @upcoming_events.each do |event| %>
        <div class="card mb-3 shadow-sm border-0 rounded-4" style="background-color: #ffffff;">
          <div class="card-body text-center p-3"
               data-controller="event-card"
               data-event-card-url-value="<%= event_path(event) %>"
               data-action="click->event-card#goToEvent"
            style="cursor: pointer;">

            <div class="d-inline-block px-3 py-1 rounded-pill bg-light text-dark fw-semibold mb-2"
                 style="font-size: 0.9rem;">
              <i class="bi bi-clock me-1"></i>
              <%= event.date.strftime("%A, %b %-d") %> â€¢ <%= event.start_time.strftime("%-I:%M %p") %>
            </div>
            <br>
            <small>
              <%= link_to event.artist.username, artist_path(event.artist),
                          class: "text-decoration-none",
                          onclick: "event.stopPropagation(); event.stopImmediatePropagation();" %>
            </small>
          </div>
        </div>
      <% end %>
    <% else %>
      <p class="text-muted text-center">No upcoming events.</p>
    <% end %>

  </div>
</div>
