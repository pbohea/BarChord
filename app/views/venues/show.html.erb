<div class="container my-4" style="max-width: 500px;">
  <div class="card shadow-sm">
    <div class="card-body text-center">

      <% if @venue.image.present? %>
        <img src="<%= url_for(@venue.image) %>" alt="Artist Photo" class="rounded-circle mb-3" style="width: 120px; height: 120px; object-fit: cover;">
      <% else %>
        <div class="rounded-circle bg-secondary mb-3 d-flex align-items-center justify-content-center" style="width: 120px; height: 120px; color: white;">
          <i class="fas fa-user fa-2x"></i>
        </div>
      <% end %>
      <h4 class="mb-3"><%= @venue.name %></h4>

      <% if @venue.full_address.present? %>
        <p class="mb-2">
          <%= @venue.full_address %>
        </p>
      <% end %>

      <% if @venue.website.present? %>
        <p>
          <%= link_to "Visit Website", @venue.website, target: "_blank", rel: "noopener", class: "btn btn-sm btn-outline-dark" %>
        </p>
      <% end %>

      <p class="text-muted mt-3">
        <strong>Category:</strong> <%= @venue.category %>
      </p>

      <!-- Trigger button -->

      <button type="button" class="btn btn-outline-primary mt-3 mb-3" data-bs-toggle="modal" data-bs-target="#venueUpcomingEventsModal">
        View Upcoming Events
      </button>

      <% unless owner_signed_in? %>

        <turbo-frame id="follow_button_<%= @venue.id %>" >
          <%= render partial: "venues/follow_button", locals: { venue: @venue } %>
        </turbo-frame>

      <% end %>

      <!-- Modal -->
      <div class="modal fade" id="venueUpcomingEventsModal" tabindex="-1" aria-labelledby="venueUpcomingEventsLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="venueUpcomingEventsLabel">Upcoming Events at <%= @venue.name %></h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body p-3">
              <turbo-frame id="venue_upcoming_events_frame" src="<%= upcoming_events_venue_path(@venue) %>">
                <div class="text-center text-muted">Loading events...</div>
              </turbo-frame>
            </div>
          </div>
        </div>
      </div>

    </div>
  </div>
</div>
